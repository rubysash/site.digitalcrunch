{{ $css := resources.Get "css/tracer.css" | minify | fingerprint }}
{{ $js := resources.Get "js/tracer.js" | minify | fingerprint }}
<link rel="stylesheet" href="{{ $css.RelPermalink }}">

<div id="tracer-root">
    <div id="ribbon">
        <div class="group">
            <input type="file" id="file-input" style="display:none">
            <button onclick="document.getElementById('file-input').click()">ğŸ“ Load BG</button>
            <button onclick="undo()">âŸ² Undo</button>
            <button style="background:var(--danger) !important" onclick="clearCanvas()">âœ– Clear</button>
        </div>
        <div class="group">
            <label style="font-size: 0.75em;"><input type="checkbox" id="smooth-toggle" checked onchange="updateDraw()"> Smooth</label>
            <label style="font-size: 0.75em;"><input type="checkbox" id="snap-toggle"> Snap</label>
        </div>
        <div class="group hover-panel" id="path-panel" onmouseleave="this.classList.remove('suppress-hover')">
            <span class="label-tab" onclick="toggleLock('path-panel')">ğŸ“ Path String</span>
            <textarea id="svg-output"></textarea>
            <button onclick="parseManualInput()">Sync</button>
            <button onclick="copyOutput()">Copy</button>
        </div>
        <div class="group hover-panel" id="bg-panel" onmouseleave="this.classList.remove('suppress-hover')">
            <span class="label-tab" onclick="toggleLock('bg-panel')">ğŸ–¼ï¸ BG SVG</span>
            <textarea id="svg-input"></textarea>
            <button onclick="renderTextAsBG()">Render</button>
        </div>
        <div style="font-size: 0.7em; color: #666; margin-left: auto;">Space+Drag: Pan | Scroll: Zoom</div>
    </div>
    <div id="viewport">
        <div id="world">
            <div id="bg-layer"></div>
            <svg id="grid-layer" width="8000" height="8000">
                <rect width="100%" height="100%" fill="url(#minorGrid)" /><rect width="100%" height="100%" fill="url(#majorGrid)" />
            </svg>
            <svg id="draw-layer" width="8000" height="8000" style="overflow: visible;">
                <path id="traced-path" d="" fill="none" stroke="#00f2ff" stroke-width="3" />
                <g id="node-markers"></g>
            </svg>
        </div>
    </div>
</div>
<script defer src="{{ $js.RelPermalink }}"></script>