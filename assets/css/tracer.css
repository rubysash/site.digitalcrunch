/* ==========================================================================
   1. BLOWFISH THEME OVERRIDES (Force Full Width & Hide Duplicates)
   ========================================================================== */
header.mt-12, .mb-12, header.pb-10, .prose h1:first-child, .fixed-header {
    display: none !important;
}

.prose, .max-w-prose, .max-w-screen-xl, article section.flex.flex-col {
    max-width: 100% !important;
    width: 100% !important;
    padding: 0 !important;
    margin: 0 !important;
}

/* ==========================================================================
   2. CORE TOOL STYLING
   ========================================================================== */
:root { --accent: #00f2ff; --bg: #000; --ui: #1a1a1a; --btn: #252525; --hover: #333; --danger: #552222; }

#tracer-root {
    display: flex;
    flex-direction: column;
    height: 100vh;
    width: 100vw;
    background: var(--bg);
    color: #eee;
    position: relative;
    left: 50%;
    transform: translateX(-50%);
    z-index: 50;
    overflow: hidden;
}

#ribbon { 
    background: var(--ui); padding: 0 15px; display: flex; gap: 12px; 
    align-items: center; border-bottom: 1px solid #333; z-index: 10000; 
    height: 45px; box-sizing: border-box; 
}

.group { display: flex; align-items: center; gap: 8px; border-right: 1px solid #444; padding-right: 12px; height: 100%; }
.group:last-child { border: none; }

/* RE-COLOR NODES: Ensure they are red, not black */
.node { cursor: move; pointer-events: all; fill: #ff0055 !important; stroke: rgba(255,255,255,0.3); stroke-width: 1; transition: r 0.1s; }
.node:hover { r: 8; fill: #fff !important; stroke: var(--accent); }

/* Panel Logic */
.hover-panel { position: relative; display: flex; align-items: center; height: 100%; }
.hover-panel textarea { 
    position: absolute; top: 45px; left: 0; width: 450px; height: 0; 
    opacity: 0; transition: height 0.2s, opacity 0.2s; overflow: hidden;
    background: #111; color: var(--accent); border: 1px solid var(--accent);
    z-index: 10005; pointer-events: none; padding: 0;
}
.hover-panel:hover:not(.suppress-hover) textarea, .hover-panel.locked textarea { height: 300px; opacity: 1; pointer-events: all; padding: 10px; }

.label-tab { cursor: pointer; font-size: 0.85em; font-weight: bold; color: #aaa; white-space: nowrap; padding: 4px 8px; border-radius: 3px; user-select: none; }
.hover-panel.locked .label-tab { color: var(--accent); background: #333; box-shadow: inset 0 0 4px var(--accent); }

#viewport { flex: 1; position: relative; overflow: hidden; cursor: crosshair; }
#world { position: absolute; transform-origin: 0 0; }
#bg-layer, #grid-layer, #draw-layer { position: absolute; top: 0; left: 0; pointer-events: none; }

button { padding: 4px 10px; cursor: pointer; background: var(--btn); color: #fff !important; border: 1px solid #444; border-radius: 3px; font-size: 0.82em; }
button:hover { background: var(--hover); border-color: var(--accent); }
#coord-pill { position: absolute; bottom: 15px; right: 15px; background: rgba(0,0,0,0.8); padding: 3px 12px; border-radius: 15px; color: var(--accent); border: 1px solid var(--accent); font-size: 0.8em; z-index: 1000; }